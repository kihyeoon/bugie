# Bugie MVP 제작 계획

## 📋 프로젝트 개요

### MVP 목표

- **기간**: 3개월 (12주)
- **목표**: 부부가 함께 사용할 수 있는 실시간 공유 가계부의 핵심 기능 구현
- **플랫폼**: Web (Next.js) + Mobile (Expo)
- **핵심 가치**: 실시간 동기화, 직관적 UI, 안전한 데이터 관리

### MVP 범위

- ✅ 사용자 인증 및 프로필 관리
- ✅ 가계부 생성 및 공유
- ✅ 수입/지출 입력 및 관리
- ✅ 실시간 동기화 (3초 이내)
- ✅ 예산 설정 및 알림
- ❌ AI 자동 분류 (Phase 2)
- ❌ 영수증 OCR (Phase 2)

## 🚀 Phase 1: MVP 핵심 기능 (3개월)

### 1주차: 프로젝트 초기 설정

- [x] Supabase 프로젝트 생성
- [x] 환경 변수 설정 (.env.local)
- [x] 공통 타입 패키지 생성 (@repo/types)
- [x] ESLint/Prettier 설정 통일
- [x] Git 브랜치 전략 수립

### 2-3주차: 인증 시스템 ⏳ **[90% 완료]**

- [x] Supabase Auth 설정
  - [x] 소셜 로그인 (Google 완료, Apple/Kakao 향후)
  - [x] 세션 관리 및 토큰 처리
- [x] 인증 UI 구현
  - [x] 로그인 페이지 (Google Sign-In 버튼)
  - [ ] 프로필 설정 페이지 (부분 완료 - 닉네임만 구현)
- [x] 인증 상태 관리
  - [x] Context API 설정 (AuthProvider)
  - [x] 보호된 라우트 구현 (프로필 완성도 체크)
  - [x] 세션 관리 (자동 로그인)

**완료된 기능**:
- Google Sign-In SDK 통합
- 서비스 레이어 아키텍처 적용 (authService, googleAuth, profileService)
- 프로필 완성도 기반 자동 라우팅

**미완성 항목**:
- 프로필 사진 설정 기능
- 기본 통화 선택 (KRW/USD 등)
- 이용약관 동의 UI

### 4-5주차: 데이터베이스 설계 및 기본 CRUD ⏳ **[진행중]**

- [x] 데이터베이스 스키마 설계 (**완료**)
  - [x] profiles 테이블 (사용자 프로필)
  - [x] ledgers 테이블 (가계부)
  - [x] ledger_members 테이블 (공유 멤버)
  - [x] transactions 테이블 (거래 내역)
  - [x] categories & category_templates 테이블 (하이브리드 카테고리)
  - [x] budgets 테이블 (예산)
- [x] Supabase 마이그레이션 작성 (**완료**)
- [x] Row Level Security (RLS) 정책 설정 (**완료**)
- [ ] 기본 CRUD API 구현 (**다음 단계**)
  - [ ] 가계부 생성/조회/수정/삭제
  - [ ] 거래 내역 CRUD

**완료된 작업**:
- 하이브리드 카테고리 시스템 설계 (템플릿 + 커스텀)
- 다중 사용자 권한 시스템 (owner/admin/member/viewer)
- Soft Delete 패턴 적용
- 성능 최적화 인덱스 설정
- 데이터베이스 뷰 및 함수 구현

### 6-7주차: 핵심 기능 구현

- [ ] 가계부 관리
  - [ ] 가계부 목록 페이지
  - [ ] 가계부 상세 페이지
  - [ ] 가계부 설정 (이름, 설명, 색상)
- [ ] 수입/지출 관리
  - [ ] 거래 입력 폼
  - [ ] 거래 목록 (무한 스크롤)
  - [ ] 거래 상세/수정/삭제
  - [ ] 카테고리 선택 UI
- [ ] 필터 및 검색
  - [ ] 날짜별 필터
  - [ ] 카테고리별 필터
  - [ ] 검색 기능

### 8-9주차: 공유 및 실시간 동기화

- [ ] 가계부 공유 시스템
  - [ ] 초대 링크 생성
  - [ ] 이메일 초대
  - [ ] 멤버 권한 관리 (소유자/편집자/조회자)
  - [ ] 멤버 목록 및 관리
- [ ] 실시간 동기화
  - [ ] Supabase Realtime 설정
  - [ ] 거래 내역 실시간 업데이트
  - [ ] 동시 편집 충돌 해결
  - [ ] 온라인/오프라인 상태 표시

### 10-11주차: 예산 관리 및 대시보드

- [ ] 예산 설정
  - [ ] 월별/주간 예산 설정 UI
  - [ ] 카테고리별 예산 할당
  - [ ] 예산 수정/삭제
- [ ] 예산 추적
  - [ ] 예산 사용률 표시
  - [ ] 예산 초과 알림 설정
- [ ] 홈 화면 및 대시보드
  - [ ] 홈 화면 캘린더 뷰 구현
  - [ ] 월간 수입/지출 요약
  - [ ] 카테고리별 지출 차트
  - [ ] 예산 대비 지출 현황
  - [ ] 최근 거래 내역

### 12주차: UI/UX 개선 및 테스트

- [ ] UI 컴포넌트 정리
  - [ ] 공통 컴포넌트 추출
  - [ ] 디자인 시스템 문서화
  - [ ] 다크모드 지원
- [ ] 성능 최적화
  - [ ] 이미지 최적화
  - [ ] 번들 크기 최적화
  - [ ] 로딩 상태 개선
- [ ] 테스트
  - [ ] 단위 테스트 작성
  - [ ] E2E 테스트 시나리오
  - [ ] 사용성 테스트

## 📁 프로젝트 구조

### 새로 생성할 디렉토리/파일

```
packages/
├── types/                    # 공통 타입 정의
│   ├── package.json
│   ├── tsconfig.json
│   └── src/
│       ├── index.ts
│       ├── auth.ts          # 인증 관련 타입
│       ├── ledger.ts        # 가계부 관련 타입
│       ├── transaction.ts   # 거래 관련 타입
│       └── supabase.ts      # Supabase 스키마 타입

apps/web/
├── app/
│   ├── (auth)/              # 인증 관련 페이지
│   │   ├── login/
│   │   ├── signup/
│   │   └── reset-password/
│   ├── (dashboard)/         # 대시보드
│   │   └── page.tsx
│   ├── ledgers/             # 가계부 관련 페이지
│   │   ├── page.tsx         # 가계부 목록
│   │   ├── [id]/
│   │   │   ├── page.tsx     # 가계부 상세
│   │   │   ├── settings/
│   │   │   └── transactions/
│   └── profile/             # 프로필 관리
├── components/
│   ├── auth/                # 인증 컴포넌트
│   ├── ledger/              # 가계부 컴포넌트
│   ├── transaction/         # 거래 컴포넌트
│   └── shared/              # 공통 컴포넌트
├── lib/
│   ├── supabase/
│   │   ├── client.ts        # Supabase 클라이언트
│   │   ├── auth.ts          # 인증 헬퍼
│   │   └── database.ts      # 데이터베이스 헬퍼
│   └── hooks/               # 커스텀 훅
├── contexts/                # Context providers
└── utils/                   # 유틸리티 함수

apps/native/
├── app/
│   ├── (auth)/              # 인증 스크린 (네이티브)
│   ├── (tabs)/              # 탭 네비게이션
│   │   ├── home.tsx         # 홈/캘린더 (네이티브)
│   │   ├── webview.tsx      # 웹뷰 컨테이너
│   │   ├── add.tsx          # 빠른 입력 (네이티브)
│   │   └── more.tsx         # 더보기 (웹뷰 연결)
│   └── ledger/              # 가계부 관련 스크린
├── components/
│   └── WebViewScreen.tsx    # 웹뷰 래퍼 컴포넌트
└── utils/
    └── webviewBridge.ts     # 웹뷰 통신 유틸
```

## 📱 웹뷰 활용 전략

### 웹뷰를 사용하는 이유

- **개발 효율성**: 한 번의 개발로 웹과 네이티브 앱 모두에서 동일한 기능 제공
- **일관된 사용자 경험**: 플랫폼 간 완전히 동일한 UI/UX 보장
- **빠른 업데이트**: 앱 스토어 심사 없이 즉시 기능 개선 및 버그 수정 가능
- **복잡한 UI 구현**: 차트, 그래프, 애니메이션 등 웹 기술로 더 쉽고 풍부하게 구현
- **유지보수 용이성**: 하나의 코드베이스로 관리하여 버그 수정 및 기능 추가 효율화

### 웹뷰 사용 페이지

| 페이지             | 사용 이유                   | 구현 내용                                     |
| ------------------ | --------------------------- | --------------------------------------------- |
| **대시보드**       | 복잡한 차트와 데이터 시각화 | 월별/카테고리별 지출 차트, 예산 사용률 그래프 |
| **거래 내역 상세** | 복잡한 필터링과 검색 UI     | 날짜/카테고리/금액별 필터, 무한 스크롤        |
| **예산 리포트**    | 인터랙티브한 데이터 분석    | 예산 대비 지출 분석, 트렌드 차트              |
| **가계부 설정**    | 폼 중심의 설정 화면         | 가계부 정보 수정, 멤버 관리, 카테고리 설정    |
| **프로필 관리**    | 간단한 CRUD 작업            | 사용자 정보 수정, 알림 설정                   |
| **공유 및 초대**   | 복잡한 권한 관리 UI         | 멤버 초대, 권한 설정, 공유 링크 생성          |

### 네이티브 구현 페이지

| 페이지             | 네이티브 사용 이유            | 특징                           |
| ------------------ | ----------------------------- | ------------------------------ |
| **거래 빠른 입력** | 빠른 반응성과 네이티브 키보드 | 숫자 키패드, 제스처 인식       |
| **홈 탭 (캘린더)** | 앱 시작 시 빠른 로딩          | 월간 캘린더, 일별 수입/지출    |
| **푸시 알림**      | OS 레벨 기능 활용             | 예산 초과 알림, 공유 초대 알림 |
| **카메라 (향후)**  | 디바이스 하드웨어 접근        | 영수증 촬영                    |

### 웹뷰 통신 구조

```
Native App ←→ WebView Bridge ←→ Next.js Web App
     ↓                                    ↓
  Native Storage              Supabase Backend
  (토큰, 설정)                  (데이터, 인증)
```

### 웹뷰 성능 최적화 전략

- **프리로딩**: 자주 사용하는 페이지 미리 로드
- **캐싱**: 정적 리소스 적극적 캐싱
- **레이지 로딩**: 필요한 컴포넌트만 동적 로드
- **번들 최적화**: 페이지별 코드 스플리팅

## 🛠 기술 스택

### Frontend

- **Web**: Next.js 15, React 19, Tailwind CSS
- **Native**: Expo SDK 53, React Native 0.79
- **상태 관리**: Context API + Supabase Realtime
- **UI 라이브러리**: @repo/ui (공통 컴포넌트)
- **폼 관리**: React Hook Form
- **차트**: Recharts (Web) / Victory Native (Mobile)

### API 구현 방식

- **기본 CRUD**: Supabase 자동 생성 REST API
- **복잡한 비즈니스 로직**: Supabase Edge Functions
- **클라이언트 SDK**: @supabase/supabase-js
- **실시간 데이터**: Supabase Realtime 구독

### Backend

- **Database**: Supabase PostgreSQL
- **Authentication**: Supabase Auth
- **Realtime**: Supabase Realtime
- **Storage**: Supabase Storage
- **Edge Functions**: Supabase Edge Functions (필요시)

### DevOps

- **Web 배포**: Vercel
- **Native 빌드**: Expo EAS
- **모니터링**: Sentry
- **CI/CD**: GitHub Actions

## 🔧 개발 환경 설정

### 필수 환경 변수

```env
# Supabase
NEXT_PUBLIC_SUPABASE_URL=
NEXT_PUBLIC_SUPABASE_ANON_KEY=
SUPABASE_SERVICE_ROLE_KEY=

# Expo (Native)
EXPO_PUBLIC_SUPABASE_URL=
EXPO_PUBLIC_SUPABASE_ANON_KEY=

# Sentry (선택사항)
NEXT_PUBLIC_SENTRY_DSN=
EXPO_PUBLIC_SENTRY_DSN=
```

### 초기 설정 명령어

```bash
# 의존성 설치
pnpm install

# Supabase CLI 설치
npm install -g supabase

# Supabase 로컬 개발 환경 시작
supabase start

# 개발 서버 실행
pnpm dev
```

## 📊 성공 지표

### 기술적 지표

- [ ] 페이지 로드 시간 < 1.5초
- [ ] 실시간 동기화 지연 < 3초
- [ ] Lighthouse 점수 > 90
- [ ] 앱 크기 < 50MB

### 기능적 지표

- [ ] 모든 핵심 기능 구현 완료
- [ ] 크로스 플랫폼 일관성
- [ ] 오프라인 지원 (기본)
- [ ] 다국어 지원 준비

## 🚧 리스크 및 대응 방안

### 기술적 리스크

1. **실시간 동기화 성능**
   - 대응: 낙관적 업데이트, 디바운싱 적용
2. **크로스 플랫폼 UI 일관성**
   - 대응: 공통 컴포넌트 라이브러리 확대

3. **데이터 보안**
   - 대응: RLS 정책 철저히 구현, 정기 보안 점검

### 일정 리스크

1. **예상보다 긴 개발 시간**
   - 대응: 주간 스프린트 리뷰, 우선순위 재조정

2. **예기치 않은 기술적 난제**
   - 대응: 기술 스파이크 시간 확보, 대안 준비

## 📝 다음 단계 (Phase 2)

### 4-6개월차 추가 기능

- [ ] AI 기반 자동 카테고리 분류
- [ ] 영수증 OCR 스캔
- [ ] 고급 분석 및 인사이트
- [ ] 예산 추천 시스템
- [ ] 목표 저축 기능
- [ ] 정기 거래 자동 입력
- [ ] 엑셀/PDF 내보내기
- [ ] 음성 입력 기능

### 7-9개월차 확장 기능

- [ ] 가족 구성원 관리 (자녀 용돈)
- [ ] 투자 포트폴리오 연동
- [ ] 세금 계산 도우미
- [ ] 커뮤니티 기능
- [ ] 프리미엄 구독 모델

---

이 문서는 개발 진행에 따라 지속적으로 업데이트됩니다.
## 📈 현재 진행 상황 (2025-07-29)

### ✅ 완료된 마일스톤
1. **인증 시스템** - Google Sign-In 완전 구현
2. **데이터베이스 설계** - 하이브리드 카테고리 시스템 포함 완료
3. **아키텍처 기반** - 서비스 레이어 패턴 적용

### 🎯 다음 우선순위
1. **데이터베이스 마이그레이션 실행** - Supabase에 스키마 적용
2. **가계부 CRUD API** - 기본 데이터 조작 기능 구현
3. **홈 화면 구현** - 탭 네비게이션과 캘린더 뷰

### 📊 진행률
- **전체 진행률**: 25% (3/12주차 완료)
- **인증**: 90% ⏳ (프로필 설정 화면 일부 미완성)
- **데이터베이스**: 80% ⏳ (설계 완료, 마이그레이션 대기)
- **UI 구현**: 10% (인증 화면만 완료)

---

마지막 업데이트: 2025-07-29
